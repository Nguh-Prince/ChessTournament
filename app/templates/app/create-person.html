{% load i18n static socialaccount %}

<!DOCTYPE html>
<html lang="en">

<meta http-equiv="content-type" content="text/html;charset=utf-8" />

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>{% trans "Mate" %}</title>
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon.png">
    <link rel="stylesheet" type="text/css" href="{% static 'app/bootstrap/css/bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app/font-awesome/css/all.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app/css/styles.css' %}">
    <script src="{% static 'app/js/jquery-3.6.0.min.js' %}"></script>
    <script src="{% static 'app/bootstrap/js/bootstrap.min.js' %}"></script>

    <style>
        #errors {
            position: fixed;
            overflow-y: auto;
            top: 0;
            width: 80%;
            margin-left: 10%;
        }

        .signin_validate>.row {
            padding-top: 16px;
            padding-bottom: 16px;
        }
    </style>
</head>

<body>
    {% if errors %}
    <div id="errors">
        {% for error in errors %}
        <div class="alert alert-danger alert-dismissible" role="alert">
            <strong>{{ error }}</strong>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="authincation section-padding">
        <div class="container h-100">
            <div class="row justify-content-center h-100 align-items-center">
                <div class="col-xl-5 col-md-6">
                    <div class="mini-logo text-center my-4">
                        <h4 class="card-title mt-5">{% trans "Personal information" %}</h4>
                    </div>
                    <div class="auth-form card">
                        <div class="card-body">
                            <form method="post" name="myform" class="signin_validate row g-3">
                                {% csrf_token %}
                                <div class="row hide" id="personal-info">
                                    <div class="col-12">
                                        <label class="form-label">{% trans "First and last name" %}</label>
                                        <input type="text" class="form-control" placeholder="{% trans 'Name' %}"
                                            name="name">
                                    </div>
                                    <div class=" col-12 ">
                                        <label class=" form-label">{% trans "Phone" %}</label>
                                        <input type="tel" class="form-control" placeholder="679001234" name="phone">
                                    </div>
                                    <div class="col-12 ">
                                        <label class="form-label">{% trans "Class" %}</label>
                                        <input type="text" class="form-control" placeholder="SE3" name="class">
                                    </div>
                                    <div class="col-12">
                                        <label for="gender" class="form-label">{% trans "Gender" %}</label>
                                        <select name="gender" id="gender" class="form-control select">
                                            <option value="f">{% trans "Female" %}</option>
                                            <option value="m">{% trans "Male" %}</option>
                                            <option value="nb">{% trans "Non-binary" %}</option>
                                            <option value="rns">{% trans "Rather not say" %}</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="row" id="user-info">
                                    <div class="col-12 input-group mb-3">
                                        <span class="input-group-text">
                                            <i class="fas fa-user"></i>
                                        </span>
                                        <input type="text" id="username" class="form-control"
                                            placeholder="{% trans 'Username e.g john_doe' %}">
                                    </div>
                                    <div class="col-12 input-group mb-3">
                                        <span class="input-group-text">
                                            <i class="fas fa-envelope"></i>
                                        </span>
                                        <input type="email" class="form-control" placeholder="hello@example.com"
                                            name="email">
                                    </div>
                                    <div class="col-12 input-group mb-3">
                                        <span class="input-group-text">
                                            <i class="fas fa-at"></i>
                                        </span>
                                        <input type="text" class="form-control" id="telegram-username"
                                            name="telegram_username" placeholder="{% trans 'Telegram username' %}">
                                    </div>
                                    <div class="col-12 input-group mb-3">
                                        <span class="input-group-text">
                                            <i class="fas fa-lock"></i>
                                        </span>
                                        <input type="password" name="password" id="password"
                                            placeholder="{% trans 'Password' %}" class="form-control">
                                        <span class="input-group-text">
                                            <i class="fas fa-eye"></i>
                                        </span>
                                    </div>
                                    <div class="col-12 input-group mb-3">
                                        <span class="input-group-text">
                                            <i class="fas fa-lock"></i>
                                        </span>
                                        <input type="password" name="password"
                                            placeholder="{% trans 'Confirm password' %}" id="confirm_password"
                                            class="form-control">
                                        <span class="input-group-text">
                                            <i class="fas fa-eye"></i>
                                        </span>
                                    </div>
                                </div>

                                <div class="d-grid gap-2">
                                    <button type="submit" class="btn btn-primary">{% trans 'Create account' %}</button>
                                </div>
                            </form>
                            <div class="text-center">
                                <p class="mt-3 mb-0"> <a class="text-primary" href="{% url 'app:login' %}">{% trans
                                        'Sign in' %}</a> {% trans "to your account" %}</p>
                                <p>
                                    <a href="{% provider_login_url 'github' %}">{% trans "Login with GitHub" %}</a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    // reveal/hide password
    $(".fa-eye").click(function () {
        let inputSelector = $(this).parent().parent().children('input').first()
        console.log(inputSelector)

        if (inputSelector.val()) {
            if (inputSelector.attr('type') == 'password') {
                inputSelector[0].type = "text";
            } else {
                inputSelector[0].type = "password";
            }
        }
    })
</script>

</html>